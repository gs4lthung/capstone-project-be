@startuml Coach Wallet & Withdrawal Workflow

title Coach Wallet & Withdrawal Workflow

start

:Coach views wallet;
:See current balance;
:Coach wants to withdraw;
if (Sufficient balance?) then (yes)
  :Click "Withdraw Money";
  :Open withdrawal form;
  
  :Enter withdrawal amount;
  if (Amount > Balance?) then (yes)
    :Show error;
    :Insufficient balance;
    stop
  else (no)
    :Amount validated;
  endif
  
  :Select bank account;
  :Verify bank details;
  :Review withdrawal info;
  if (Confirm withdrawal?) then (yes)
    :Submit withdrawal request;
    :Withdrawal status = PENDING;
    :Deduct from wallet balance;
    :Create wallet transaction (DEBIT);
    :Send confirmation email;
    
  else (no)
    :Cancel withdrawal;
    stop
  endif
  
else (no)
  :Insufficient balance;
  :Show message;
  :Suggest earning more;
  stop
endif

:System processes withdrawal;
:Bank transfers money;
:Withdrawal status = COMPLETED;
:Notify coach;
:Show transfer confirmation;

:Coach views withdrawal history;
:See all past withdrawals;
:Coach can dispute transaction;
if (Dispute withdrawal?) then (yes)
  :Contact support;
  :Provide dispute details;
  
else (no)
  :Withdraw successful;
endif

stop
