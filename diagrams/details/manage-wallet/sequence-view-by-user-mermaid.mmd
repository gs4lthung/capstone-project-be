sequenceDiagram
    actor User
    participant controller as WalletController
    participant auth as AuthGuard
    participant service as WalletService
    participant db as DataSource

    User->>controller: GET /wallets/users
    activate controller

    controller->>auth: validate JWT
    activate auth
    auth-->>controller: valid
    deactivate auth

    controller->>service: findByUserId()
    activate service

    service->>db: find wallet by userId
    activate db

    Note right of db: Filter: user.id == currentUser.id<br/>Relations: bank, transactions, withdrawalRequests<br/>Verify: wallet exists

    db-->>service: wallet
    deactivate db

    service-->>controller: Wallet
    deactivate service

    controller-->>User: HTTP 200 with wallet
    deactivate controller
