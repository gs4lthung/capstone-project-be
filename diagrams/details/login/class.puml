@startuml LoginClassDiagram
!theme plain
skinparam classBackgroundColor #f0f0f0
skinparam classBorderColor #333
skinparam arrowColor #333

' ════════════════════════════════════════════════════════════════════════════════════
' PRESENTATION LAYER
' ════════════════════════════════════════════════════════════════════════════════════

class LoginScreen {
  -email: string
  -phoneNumber: string
  -password: string
  --
  +handleLogin(): void
  +storeTokens(): void
  +redirectDashboard(): void
}

' ════════════════════════════════════════════════════════════════════════════════════
' CONTROLLER LAYER
' ════════════════════════════════════════════════════════════════════════════════════

class AuthController {
  -authService: AuthService
  --
  +login(data): Promise<Response>
  ...
}

' ════════════════════════════════════════════════════════════════════════════════════
' SERVICE LAYER
' ════════════════════════════════════════════════════════════════════════════════════

class AuthService {
  -userRepository: Repository
  -jwtService: JwtService
  -configService: ConfigService
  --
  +login(email, phoneNumber, password): Promise<Response>
  -validateCredentials(password, hashedPassword): boolean
  -generateTokens(user): Promise<Tokens>
  ...
}

' ════════════════════════════════════════════════════════════════════════════════════
' ENTITY LAYER
' ════════════════════════════════════════════════════════════════════════════════════

class User {
  -id: number
  -email: string
  -phoneNumber: string
  -fullName: string
  -password: string
  -role: Role
}

class Role {
  -id: number
  -name: string
}

' ════════════════════════════════════════════════════════════════════════════════════
' UTILITY LAYER
' ════════════════════════════════════════════════════════════════════════════════════

class JwtService {
  --
  +signAsync(payload): Promise<Token>
  +verifyAsync(token): Promise<Payload>
}

class ConfigService {
  --
  +get(key: string): any
}

' ════════════════════════════════════════════════════════════════════════════════════
' RELATIONSHIPS
' ════════════════════════════════════════════════════════════════════════════════════

LoginScreen --> AuthController: calls login()
AuthController --> AuthService: delegates

AuthService --> User: queries
AuthService --> JwtService: generates tokens
AuthService --> ConfigService: gets config

User --> Role: belongs to

@enduml
