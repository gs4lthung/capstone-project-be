sequenceDiagram
    actor learner as Learner
    participant controller as CourseController
    participant authGuard as AuthGuard
    participant service as CourseService
    participant db as DataSource

    Note over learner, db: View Available Courses (Public)

    learner->>controller: GET /courses/available?...
    activate controller

    controller->>service: findAvailableCourses(...)
    activate service

    service->>db: transaction
    activate db
    db-->>service: PaginateObject~Course~
    deactivate db

    service-->>controller: PaginateObject~Course~
    deactivate service

    controller-->>learner: HTTP 200 PaginateObject~Course~
    deactivate controller

    Note over learner, db: View Learner's Enrolled Courses

    learner->>controller: GET /courses/learner?...
    activate controller

    controller->>authGuard: canActivate(context)
    activate authGuard
    authGuard-->>controller: true (authenticated)
    deactivate authGuard

    controller->>service: findLearnerCourses(page, size)
    activate service

    service->>db: transaction
    activate db
    db-->>service: PaginateObject~Course~
    deactivate db

    service-->>controller: PaginateObject~Course~
    deactivate service

    controller-->>learner: HTTP 200 PaginateObject~Course~
    deactivate controller

    Note over learner, db: View Single Course Details

    learner->>controller: GET /courses/:id
    activate controller

    controller->>service: findOne(id)
    activate service

    service->>db: transaction
    activate db
    db-->>service: Course with full relations
    deactivate db

    service-->>controller: Course
    deactivate service

    controller-->>learner: HTTP 200 Course
    deactivate controller
