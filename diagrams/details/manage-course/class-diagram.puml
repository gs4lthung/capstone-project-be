@startuml ManageCourseClassDiagram
!theme plain
skinparam classBackgroundColor #f0f0f0
skinparam classBorderColor #333
skinparam arrowColor #333

left to right direction

' ════════════════════════════════════════════════════════════════════════════════════
' CONTROLLER LAYER
' ════════════════════════════════════════════════════════════════════════════════════

class CourseController {

}

class PaymentController {

}

' ════════════════════════════════════════════════════════════════════════════════════
' GUARD LAYER
' ════════════════════════════════════════════════════════════════════════════════════

class AuthGuard {

}

class RoleGuard {

}

' ════════════════════════════════════════════════════════════════════════════════════
' DTO LAYER
' ════════════════════════════════════════════════════════════════════════════════════

class CreateCourseRequestDto {

}

class UpdateCourseDto {

}

class RejectCourseDto {

}

' ════════════════════════════════════════════════════════════════════════════════════
' SERVICE LAYER
' ════════════════════════════════════════════════════════════════════════════════════

class CourseService {

}

class PaymentService {

}

class ScheduleService {

}

class SessionService {

}

class NotificationService {

}

class ConfigurationService {

}

class BunnyService {

}

class PayosService {

}

class WalletService {

}

' ════════════════════════════════════════════════════════════════════════════════════
' ENTITY LAYER
' ════════════════════════════════════════════════════════════════════════════════════

class Course {

}

class Schedule {

}

class Session {

}

class User {

}

class Subject {

}

class Court {

}

class Request {

}

class RequestAction {

}

class Enrollment {

}

class Payment {

}

' ════════════════════════════════════════════════════════════════════════════════════
' RELATIONSHIPS
' ════════════════════════════════════════════════════════════════════════════════════

' Controller relationships
CourseController --> AuthGuard: validates
CourseController --> RoleGuard: checks role
CourseController --> CourseService: uses
CourseController --> CreateCourseRequestDto: receives
CourseController --> UpdateCourseDto: receives
CourseController --> RejectCourseDto: receives

PaymentController --> AuthGuard: validates
PaymentController --> RoleGuard: checks role
PaymentController --> PaymentService: uses

' Service to Service relationships
CourseService --> ScheduleService: uses
CourseService --> SessionService: uses
CourseService --> NotificationService: uses
CourseService --> ConfigurationService: uses
CourseService --> BunnyService: uses
CourseService --> WalletService: uses

PaymentService --> PayosService: uses
PaymentService --> NotificationService: uses
PaymentService --> ConfigurationService: uses

' Service to Entity relationships
CourseService --> Course: manages
CourseService --> Request: manages
CourseService --> RequestAction: creates
CourseService --> Subject: validates
CourseService --> Court: validates
CourseService --> User: notifies

PaymentService --> Payment: manages
PaymentService --> Enrollment: updates

ScheduleService --> Schedule: generates

SessionService --> Session: generates

' Entity relationships
Course --> Schedule: has many
Course --> User: coached by
Course --> Subject: belongs to
Course --> Court: held at
Course --> Request: created from

Schedule --> Session: has many

Enrollment --> Course: enrolls in
Enrollment --> User: belongs to
Enrollment --> Payment: has

Request --> User: requested by
Request --> RequestAction: has many

@enduml