sequenceDiagram
    actor admin as Admin
    participant controller as CourseController
    participant authGuard as AuthGuard
    participant roleGuard as RoleGuard
    participant service as CourseService
    participant courseRepo as CourseRepository
    participant db as DataSource

    Note over admin, db: View All Courses (Admin)

    admin->>controller: GET /courses?page=1&size=10&...
    activate controller

    controller->>authGuard: canActivate(context)
    activate authGuard
    authGuard-->>controller: true (authenticated)
    deactivate authGuard

    controller->>roleGuard: canActivate(context)
    activate roleGuard
    roleGuard-->>controller: true (ADMIN role)
    deactivate roleGuard

    controller->>service: findAll(findOptions)
    activate service

    service->>courseRepo: find(findOptions)
    activate courseRepo
    courseRepo->>db: SELECT courses with pagination/sort/filter
    activate db
    db-->>courseRepo: Course records
    deactivate db
    courseRepo-->>service: PaginateObject~Course~
    deactivate courseRepo

    service-->>controller: PaginateObject~Course~
    deactivate service

    controller-->>admin: HTTP 200 PaginateObject~Course~
    deactivate controller

    Note over admin, db: View Single Course Details

    admin->>controller: GET /courses/:id
    activate controller

    controller->>service: findOne(id)
    activate service

    service->>db: transaction
    activate db
    db-->>service: Course with full relations
    deactivate db

    service-->>controller: Course
    deactivate service

    controller-->>admin: HTTP 200 Course
    deactivate controller
