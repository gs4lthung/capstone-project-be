@startuml ManageLessonQuizClassDiagram
!theme plain
skinparam classBackgroundColor #f0f0f0
skinparam classBorderColor #333
skinparam arrowColor #333


' ════════════════════════════════════════════════════════════════════════════════════
' CONTROLLER LAYER
' ════════════════════════════════════════════════════════════════════════════════════

class QuizController {
  --
}

' ════════════════════════════════════════════════════════════════════════════════════
' SERVICE LAYER
' ════════════════════════════════════════════════════════════════════════════════════

class QuizService {
  --
}

' ════════════════════════════════════════════════════════════════════════════════════
' ENTITY LAYER
' ════════════════════════════════════════════════════════════════════════════════════

class Quiz {
  --
}

class Question {
  --
}

class QuestionOption {
  --
}

class Lesson {
  --
}

class Subject {
  --
}

class User {
  --
}

' ════════════════════════════════════════════════════════════════════════════════════
' DTO LAYER
' ════════════════════════════════════════════════════════════════════════════════════

class CreateQuizDto {
  --
}

class CreateQuestionDto {
  --
}

class CreateQuestionOptionDto {
  --
}

class UpdateQuizDto {
  --
}

class UpdateQuestionDto {
  --
}

class UpdateQuestionOptionDto {
  --
}

' ════════════════════════════════════════════════════════════════════════════════════
' ENUMS
' ════════════════════════════════════════════════════════════════════════════════════

enum Role {
    LEARNER
    COACH
    ADMIN
    STAFF
}

enum PickleballLevel {
    BEGINNER
    INTERMEDIATE
    ADVANCED
}

enum SubjectStatus {
    DRAFT
    PUBLISHED
}

' ════════════════════════════════════════════════════════════════════════════════════
' INFRASTRUCTURE
' ════════════════════════════════════════════════════════════════════════════════════


' ════════════════════════════════════════════════════════════════════════════════════
' RELATIONSHIPS
' ════════════════════════════════════════════════════════════════════════════════════

' Presentation to Controller


' Controller to Service
QuizController --> QuizService: uses

' Service to Repository & Entity
QuizService --> Quiz: manages
QuizService --> Lesson: validates

' Entity Relationships
Quiz "1" --> "many" Question: contains
Question "1" --> "many" QuestionOption: has
Quiz "many" --> "1" User: createdBy
Lesson "1" --> "1" Quiz: has
Subject "1" --> "many" Lesson: contains
Subject "many" --> "1" User: createdBy

' DTO usage
QuizController ..> CreateQuizDto: uses
QuizController ..> UpdateQuizDto: uses
CreateQuizDto "1" --> "many" CreateQuestionDto: contains
CreateQuestionDto "1" --> "many" CreateQuestionOptionDto: has
UpdateQuizDto "1" --> "many" UpdateQuestionDto: contains
UpdateQuestionDto "1" --> "many" UpdateQuestionOptionDto: has

@enduml