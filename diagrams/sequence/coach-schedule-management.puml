@startuml coach-schedule-management
title Coach Schedule Management

actor Coach
participant "Coach\nApp" as CoachApp
participant "API\nGateway" as API
participant "Schedule\nController" as ScheduleCtrl
participant "Schedule\nService" as ScheduleSvc
participant "Session\nService" as SessionSvc
participant "Database" as DB

== View Available Schedules ==
Coach -> CoachApp: Go to "Manage Schedules"
CoachApp -> API: GET /schedules/coaches/available\n[with JWT token]
API -> ScheduleCtrl: getAvailableSchedulesByCoach()
ScheduleCtrl -> ScheduleSvc: getAvailableSchedulesByCoach()
ScheduleSvc -> DB: Query schedules for coach
DB --> ScheduleSvc: Schedules list
ScheduleSvc --> ScheduleCtrl: Schedules
ScheduleCtrl --> API: Response
API --> CoachApp: Display available schedules
CoachApp --> Coach: Show schedule list

== Get Schedules By Course ==
Coach -> CoachApp: Select a course
CoachApp -> API: GET /schedules/courses/:courseId
API -> ScheduleCtrl: getScheduleByCourse(courseId)
ScheduleCtrl -> ScheduleSvc: getScheduleByCourse(courseId)
ScheduleSvc -> DB: Query schedules for course
DB --> ScheduleSvc: Course schedules
ScheduleSvc --> ScheduleCtrl: Schedules
ScheduleCtrl --> API: Response
API --> CoachApp: Display course schedules
CoachApp --> Coach: Show course schedule details

== Change Session Schedule ==
Coach -> CoachApp: Select a session to reschedule
CoachApp -> CoachApp: Display reschedule form\n(select new date/time)

Coach -> CoachApp: Enter new schedule details
CoachApp -> API: PUT /schedules/sessions/:id/new-schedule\n(scheduleData)
API -> ScheduleCtrl: createNewScheduleForSessions(sessionId, data)
ScheduleCtrl -> ScheduleSvc: changeSessionSchedule(sessionId, data)
ScheduleSvc -> DB: Get current session details
DB --> ScheduleSvc: Session data
ScheduleSvc -> DB: Update session\n(newStartTime, newEndTime)
DB --> ScheduleSvc: Session updated

ScheduleSvc --> ScheduleCtrl: Success
ScheduleCtrl --> API: Response
API --> CoachApp: Schedule updated
CoachApp --> Coach: "Session rescheduled!\nNew time: [date/time]"

== Learner Enrollment & Course Access ==
note right of Coach
  Learners can discover and enroll
  in courses from available
  schedules shown on platform
end

@enduml

