@startuml Guest Registration as Learner Process
!theme plain
title Guest Registration - Sequence Diagram

actor Guest
participant "Client App" as Client
participant "Backend" as API
participant "Auth Service" as Auth
participant "Database" as DB

== Registration Start ==
Guest -> Client: Click "Sign Up" Button
activate Client
Client -> Client: Open Registration Form
Client --> Guest: Display Registration Form

== User Input ==
Guest -> Client: Enter Details\n(fullName, phoneNumber, password, learner details)
activate Guest

== Validate & Check Phone ==
Guest -> Client: Click "Register" Button
Client -> API: POST /auth/register\n(fullName, phoneNumber, password)
deactivate Guest
activate API

API -> Auth: register(fullName, phoneNumber, password)
activate Auth

Auth -> DB: Check if Phone Exists
activate DB
DB --> Auth: Phone Status
deactivate DB

alt Phone Already Exists
  Auth --> API: Error (409)
  API --> Client: Error Response
  Client --> Guest: Show Warning\n"Phone Already Registered"
else Phone is Available
  Auth -> DB: Create User & Learner Profile
  DB --> Auth: Success
  deactivate Auth
  
  API --> Client: Success
  deactivate API
  
  Client --> Guest: Show Confirmation\n"Registration Successful!\nCheck SMS for Verification Code"
end

== Registration End ==
