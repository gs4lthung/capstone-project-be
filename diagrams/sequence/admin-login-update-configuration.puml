@startuml Admin Login and Update Configuration
!theme plain
title Admin Login and Update Configuration - Sequence Diagram

actor Admin
participant "Client App" as Client
participant "Backend" as Backend
participant "Auth Service" as Auth
participant "Configuration Service" as ConfigService
participant "Database" as DB

== Admin Login Start ==
Admin -> Client: Click "Admin Login"
activate Client
Client -> Client: Open Admin Login Form
Client --> Admin: Display Login Form

== Admin Credentials Input ==
Admin -> Client: Enter Credentials\n(email, password)\n[Admin only login with email]
activate Admin

== Validate & Authenticate ==
Admin -> Client: Click "Login" Button
Client -> Backend: POST /auth/login\n(email, password)
deactivate Admin
activate Backend

Backend -> Auth: login(email, password)
activate Auth

Auth -> DB: Verify Credentials\nQuery: email, password
activate DB
DB --> Auth: Success (User is ADMIN)
deactivate DB

alt Invalid Credentials
  Auth --> Backend: Error
  Backend --> Client: Error Response (401)
  Client --> Admin: Show Error\n"Invalid Credentials"
else Valid Admin
  Auth --> Backend: Login Success\n(accessToken)
  Backend --> Client: Success
  Client --> Admin: Redirect to Admin Dashboard
  deactivate Auth
  deactivate Backend
end

== Admin Access Configuration ==
Admin -> Client: Navigate to Configuration Page
activate Admin
Client -> Backend: GET /configurations\n[with JWT token]
activate Backend

Backend -> ConfigService: findAll()
activate ConfigService

ConfigService -> DB: Query Configurations\nWITH pagination, sort, filter
activate DB
DB --> ConfigService: Return Configuration List\n(id, key, value, dataType, description,\ncreatedAt, updatedAt, updatedBy)
deactivate DB

ConfigService --> Backend: Configuration List
deactivate ConfigService

Backend --> Client: Success Response\nList of Configurations
deactivate Backend

Client -> Client: Display Configurations Table\n(key, value, dataType, lastUpdated)
Client --> Admin: Show Configuration List\nwith Edit Buttons
deactivate Admin

== Admin Update Configuration ==
Admin -> Client: Click Edit Button on Configuration
activate Admin
Client -> Client: Show Edit Form\n(key, value, dataType, description)
Client --> Admin: Display Configuration Edit Form

== Admin Input Changes ==
Admin -> Client: Modify Value Field\nEnter new configuration value
Client -> Client: Client-side Validation

alt Validation Error
  Client --> Admin: Show Validation Error
else Validation Success
  Admin -> Client: Click "Save Changes" Button
  
  Client -> Backend: PUT /configurations/:id\n(value)\n[with JWT token]
  deactivate Admin
  activate Backend
  
  Backend -> ConfigService: update(id, value)
  activate ConfigService
  
  ConfigService -> DB: Update Configuration\nSET value = ?
  DB --> ConfigService: Success
  deactivate ConfigService
  
  Backend --> Client: Success
  deactivate Backend
  
  Client --> Admin: Show Success Message\n"Configuration updated successfully"
end

== Process End ==
