@startuml Coach Registration Process
!theme plain
title Coach Registration - Sequence Diagram

actor Coach
participant "Client App" as Client
participant "Backend" as API
participant "Auth Service" as Auth
participant "Coach Service" as CoachService
participant "Database" as DB

== Coach Registration Start ==
Coach -> Client: Click "Register as Coach" Button
activate Client
Client -> Client: Open Coach Registration Form
Client --> Coach: Display Registration Form

== Coach Input ==
Coach -> Client: Enter Details\n(fullName, phoneNumber, password,\nprovince, district, bio,\nyearOfExperience, specialties)
activate Coach

== Validate & Check Phone ==
Coach -> Client: Click "Register" Button
Client -> API: POST /coaches/register\n(fullName, phoneNumber, password, coach profile)
deactivate Coach
activate API

API -> Auth: registerCoach(data)
activate Auth

Auth -> DB: Check if Phone Exists
activate DB
DB --> Auth: Phone Status
deactivate DB

alt Phone Already Exists
  Auth --> API: Error (409)
  API --> Client: Error Response
  Client --> Coach: Show Warning\n"Phone Already Registered"
else Phone is Available
  Auth -> DB: Create User & Coach Profile\n(phoneNumber, password, UNVERIFIED)
  DB --> Auth: Success
  deactivate Auth
  
  API --> Client: Success
  deactivate API
  
  Client --> Coach: Show Confirmation\n"Registration Successful!\nCheck SMS for Verification Code.\nWaiting for Admin Approval."
end

== Registration End ==
